<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>AURABAY PROXY</title>

    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <!-- Google tag (gtag.js) -->
    <!-- This is just so I can see page views and analytics for Helios. None of your data is collected. -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8VVWXBH142"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-8VVWXBH142');
    </script>

    <!-- Axios (for Helios AI / script.js) -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Helios is a completely unblockable web proxy, built with speed and privacy in mind.">

    <!-- Helios styles + icons -->
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />

    <!-- Scramjet internals: WISP endpoint + runtime + transports + SW + helpers -->
    <script>
      // Force absolute WISP endpoint early (before any client loads)
      window.WISP_URL = (location.protocol === 'https:' ? 'wss://' : 'ws://') + location.host + '/wisp/';
    </script>
    <script src="/scram/scramjet.all.js"></script>
    <script src="/baremux/index.js" defer></script>
    <script src="/epoxy/index.js" defer></script>
    <script src="https://unpkg.com/wisp-js/dist/wisp.min.js" defer></script>
    <script src="register-sw.js" defer></script>
    <script src="search.js" defer></script>
    <script src="index.js" defer></script>

    <!-- Extra CSS just for the Scramjet iframe inside Helios -->
    <style>
      .sj-container {
        margin-top: 18px;
        border-radius: 10px;
        overflow: hidden;
        height: 70vh;
        background: #000;
      }
      #sj-frame {
        width: 100%;
        height: 100%;
        border: none;
        background: #000;
      }
    </style>
  </head>

  <body>
    <!-- HELIOS UI (unchanged visually) -->
    <div class="uptop-baraa">
      <div class="tabaa activeaa">
        <span class="tab-nameaa">New Tab</span>
        <i class="fas fa-times close-btnaa"></i>
      </div>
      <div class="add-tabaa" title="Add tab" id="add-tabaa">
        <i class="fa-solid fa-circle-plus"></i>
      </div>
    </div>

    <div class="browser-baraa">
      <button class="backward-buttonaa" title="Click to go back">
        <i class="fas fa-arrow-left"></i>
      </button>
      <button class="forward-buttonaa" title="Click to go forward">
        <i class="fas fa-arrow-right"></i>
      </button>
      <button class="reload-buttonaa" title="Reload this page">
        <i class="fas fa-redo"></i>
      </button>
      <button class="home-buttonaa" title="Shortcut to helios://start">
        <i class="fas fa-home"></i>
      </button>

      <div class="address-baraa">
        <i class="fas fa-lock lock-iconaa"></i>
        <input type="text" placeholder="Enter a URL" value="helios://start" id="url-baraa">
        <div class="official-caa">
          <i class="fa-solid fa-circle-check officialaa">&nbsp;&nbsp;ğ™¾ğšğšğš’ğšŒğš’ğšŠğš•</i>
        </div>
      </div>

      <button class="fullscreen-button" title="Enter fullscreen" onclick="toggleFullscreen()">
        <i class="fas fa-expand"></i>
      </button>
      <button class="wrench-buttonaa" title="Open Helios AI (Experimental)" id="toggleSourceCode">
        <i class="fa-solid fa-robot"></i>
      </button>
      <button class="settings-buttonaa" title="Shortcut to helios://settings">
        <i class="fas fa-cog"></i>
      </button>
      <button class="menu-buttonaa" title="More options" onclick="toggleDropdownccc()">â‹®</button>

      <div id="myDropdownccc" class="dropdown-menuccc">
        <a href="javascript:void(0);">New Tab</a>
        <a href="javascript:void(0);" onclick="changeTabContent('helios://settings')">Helios Settings</a>
        <a href="javascript:void(0);" onclick="changeTabContent('helios://urls')">Helios Internal URLs</a>
        <a href="javascript:void(0);" onclick="downloadPage()">
          Download Helios-Offline&nbsp;&nbsp;
          <i class="fa-solid fa-download" style="font-size: 15px; color: #66ffa1;"></i>
        </a>
        <a href="javascript:void(0);" id="dataURL" onclick="generateDataURL()">Generate Session's Data Url</a>
        <a href="https://github.com/dinguschan-owo/Helios" target="_blank">
          Source Code&nbsp;&nbsp;
          <i class="fa-solid fa-up-right-from-square" style="font-size: 15px; color: #66ffa1;"></i>
        </a>
        <a href="https://github.com/dinguschan-owo/Helios/issues/new" target="_blank">
          Submit an Issue&nbsp;&nbsp;
          <i class="fa-solid fa-up-right-from-square" style="font-size: 15px; color: #66ffa1;"></i>
        </a>
        <div class="user-idff" id="user-idff"> Your User ID will appear here</div>
      </div>
    </div>

    <div class="contentaa tab-contentaa activeaa">
      <div class="Xt7Lm9Kp3R8f">
        <p>ğ™¼ğšŠğšğš ğš‹ğš¢ ğšğš’ğš—ğšğšğšœğšŒğš‘ğšŠğš—!</p>
      </div>
      <div class="top-right-boxaa">
        <p><i class="fa-brands fa-github"></i></p>
      </div>

      <h23>AURABABY PR0XY</h23>
      <h21>ğšŸ0.1</h21>

      <div class="search-baraa">
        <div class="search-containeraa">
          <div class="search-engine-dropdownaa" onclick="toggleDropdown()">
            <img
              src="https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://google.com&size=256"
              alt="Google" id="selected-engineaa">
          </div>
          <div class="dropdown-contentaa" id="engineDropdownaa">
            <div class="status-messageaa" id="statusMessageaa">Searching with Google</div>
            <a href="javascript:void(0);" onclick="selectEngine('https://4get.ca/favicon.ico', '4get')" data-engine="4get">
              <img src="https://4get.ca/favicon.ico" alt="4get"> - <s>Search with 4get</s>-
            </a>
            <a href="javascript:void(0);" onclick="selectEngine('https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://google.com&size=256', 'Google')" data-engine="Google">
              <img
                src="https://t3.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://google.com&size=256"
                alt="Google"> &nbsp;Search with Google
            </a>
            <a href="javascript:void(0);" onclick="selectEngine('https://www.bing.com/favicon.ico', 'Bing')" data-engine="Bing">
              <img src="https://www.bing.com/favicon.ico" alt="Bing"> &nbsp;Search with Bing
            </a>
            <a href="javascript:void(0);" onclick="selectEngine('https://duckduckgo.com/favicon.ico', 'DuckDuckGo')" data-engine="DuckDuckGo">
              <img src="https://duckduckgo.com/favicon.ico" alt="DuckDuckGo"> - <s>Search with DuckDuckGo</s>-
            </a>
          </div>
        </div>

        <!-- Helios main search input weâ€™re going to hook to Scramjet -->
        <input class="helios-search-input" type="text"
               placeholder="Search the web or enter a URL [Ctrl + K]">
        <i class="fas fa-search search-iconaa"></i>
      </div>

      <!-- Scramjet browsing surface: iframe lives INSIDE Helios content -->
      <div class="sj-container">
        <iframe id="sj-frame"></iframe>
      </div>
    </div>

    <!-- Modal + chatbot (unchanged Helios stuff) -->
    <div class="modalgg" id="myModal">
      <div class="modal-contentgg">
        <h2>Here is the data URL for this session (HTML):</h2>
        <textarea id="dataURLText" rows="5"
          style="height: 250px; font-size: 14.6px; width: 100%; white-space: pre-wrap; overflow-wrap: break-word; resize: none;"
          readonly></textarea>
        <br>
        <div class="button-container">
          <button class="copy-buttongg" onclick="copyDataURL()">Copy</button>
          <button class="close-buttongg" onclick="closeModal()">Close</button>
        </div>
      </div>
    </div>

    <div class="chatbot">
      <header>
        &nbsp;Helios AI (Experimental)
        <button class="close-btn">âœ•</button>
      </header>
      <div class="chatbox"></div>
      <div class="chat-input">
        <textarea placeholder="Enter a message"></textarea>
        <span class="send-btn material-symbols-rounded">send</span>
      </div>
    </div>

    <!-- Your original Helios JS -->
    <script src="script.js"></script>

    <!-- Bridge: Helios UI -> Scramjet proxy -->
    <script>
      // Build a Scramjet URL for a given target
      function scramjetProxify(url) {
        try {
          return location.origin + '/scramjet/' + encodeURIComponent(url);
        } catch (e) {
          return url;
        }
      }

      function normalizeInput(q) {
        q = (q || '').trim();
        // Looks like just a word: treat as Google search
        if (!/^[a-z][a-z0-9+.-]*:\/\//i.test(q) && !q.includes('.')) {
          return 'https://www.google.com/search?q=' + encodeURIComponent(q);
        }
        // Has a dot but no scheme: assume https
        if (!/^[a-z][a-z0-9+.-]*:\/\//i.test(q) && q.includes('.')) {
          return 'https://' + q;
        }
        // Force https
        return q.replace(/^http:\/\//i, 'https://');
      }

      // Global go() used by everything
      function go(raw) {
        const n = normalizeInput(raw || '');
        if (!n) return;

        const frame = document.getElementById('sj-frame');
        if (!frame) return;

        frame.src = scramjetProxify(n);
      }
      window.go = go;

      // Basic fullscreen implementation for the Helios fullscreen button
      function toggleFullscreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen().catch(() => {});
        } else {
          document.exitFullscreen().catch(() => {});
        }
      }
      window.toggleFullscreen = toggleFullscreen;

      document.addEventListener('DOMContentLoaded', () => {
        const frame = document.getElementById('sj-frame');
        const heliosSearch = document.querySelector('.helios-search-input');
        const urlBar = document.getElementById('url-baraa');

        function handleEnter(e, el) {
          if (e.key === 'Enter') {
            e.preventDefault();
            if (el && el.value) go(el.value);
          }
        }

        if (heliosSearch) {
          heliosSearch.addEventListener('keydown', (e) => handleEnter(e, heliosSearch));
        }
        if (urlBar) {
          urlBar.addEventListener('keydown', (e) => handleEnter(e, urlBar));
        }

        // Back / forward / reload / home wired to Scramjet iframe
        const backBtn = document.querySelector('.backward-buttonaa');
        const fwdBtn = document.querySelector('.forward-buttonaa');
        const reloadBtn = document.querySelector('.reload-buttonaa');
        const homeBtn = document.querySelector('.home-buttonaa');

        if (backBtn) {
          backBtn.addEventListener('click', () => {
            if (!frame || !frame.contentWindow) return;
            try { frame.contentWindow.history.back(); } catch (e) {}
          });
        }
        if (fwdBtn) {
          fwdBtn.addEventListener('click', () => {
            if (!frame || !frame.contentWindow) return;
            try { frame.contentWindow.history.forward(); } catch (e) {}
          });
        }
        if (reloadBtn) {
          reloadBtn.addEventListener('click', () => {
            if (!frame) return;
            const src = frame.getAttribute('src');
            if (!src) return;
            try { frame.contentWindow.location.reload(); }
            catch { frame.src = src; }
          });
        }
        if (homeBtn) {
          homeBtn.addEventListener('click', () => {
            go('https://www.google.com');
          });
        }

        // Optional: load a default page on start
        // go('https://www.google.com');
      });
    </script>
  </body>
</html>
